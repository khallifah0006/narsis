/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,r=0;r<e.length;r++)if(e[r].identifier===n){t=r;break}return t}function r(n,r){for(var a={},i=[],c=0;c<n.length;c++){var s=n[c],l=r.base?s[0]+r.base:s[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var p=t(u),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)e[p].references++,e[p].updater(m);else{var f=o(m,r);r.byIndex=c,e.splice(c,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function o(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,o){var a=r(n=n||[],o=o||{});return function(n){n=n||[];for(var i=0;i<a.length;i++){var c=t(a[i]);e[c].references--}for(var s=r(n,o),l=0;l<a.length;l++){var d=t(a[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}a=s}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",r=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),r&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),r&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,r,o,a){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(i[s]=!0)}for(var l=0;l<n.length;l++){var d=[].concat(n[l]);r&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},365:(n,e,t)=>{t.d(e,{A:()=>c});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([n.id,"/* Base Styles */\n:root {\n    --primary-color: #5D8BF4;\n    --secondary-color: #9BABF7;\n    --accent-color: #DFF6FF;\n    --dark-color: #051367;\n    --light-color: #F9F9F9;\n    --text-color: #333;\n    --error-color: #FF5252;\n    --success-color: #4CAF50;\n    --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    --transition: all 0.3s ease;\n  }\n  \n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  }\n  \n  body {\n    background-color: var(--light-color);\n    color: var(--text-color);\n    line-height: 1.6;\n  }\n  \n  \n  .skip-link {\n    position: absolute;\n    top: -50px;\n    left: 0;\n    background: var(--primary-color);\n    color: white;\n    padding: 10px;\n    z-index: 100;\n    transition: top 0.3s;\n  }\n  \n  .skip-link:focus {\n    top: 0;\n  }\n  \n  \n  header {\n    background-color: white;\n    box-shadow: var(--shadow);\n    position: sticky;\n    top: 0;\n    z-index: 10;\n  }\n  \n  nav {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 1rem 2rem;\n    max-width: 1200px;\n    margin: 0 auto;\n  }\n  \n  .logo h1 {\n    color: var(--primary-color);\n    font-size: 1.5rem;\n  }\n  \n  .nav-links {\n    display: flex;\n    gap: 1.5rem;\n    align-items: center;\n  }\n  \n  .nav-item {\n    text-decoration: none;\n    color: var(--text-color);\n    font-weight: 500;\n    transition: var(--transition);\n  }\n  \n  .nav-item:hover, .nav-item.active {\n    color: var(--primary-color);\n  }\n  \n  .auth-button {\n    background-color: var(--primary-color);\n    color: white;\n    border: none;\n    padding: 0.5rem 1rem;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: var(--transition);\n  }\n  \n  .auth-button:hover {\n    background-color: var(--dark-color);\n  }\n  \n\n  main {\n    min-height: calc(100vh - 140px);\n    max-width: 1200px;\n    margin: 2rem auto;\n    padding: 0 1rem;\n    view-transition-name: main-content;\n  }\n  \n  \n  .stories-container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 2rem;\n    margin-top: 2rem;\n  }\n  \n  .story-card {\n    background-color: white;\n    border-radius: 8px;\n    overflow: hidden;\n    box-shadow: var(--shadow);\n    transition: var(--transition);\n  }\n  \n  .story-card:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\n  }\n  \n  .story-image {\n    width: 100%;\n    height: 200px;\n    object-fit: cover;\n  }\n  \n  .story-content {\n    padding: 1.5rem;\n  }\n  \n  .story-author {\n    display: flex;\n    align-items: center;\n    margin-bottom: 0.5rem;\n  }\n  \n  .author-icon {\n    color: var(--primary-color);\n    margin-right: 0.5rem;\n  }\n  \n  .story-title {\n    font-size: 1.25rem;\n    margin-bottom: 0.5rem;\n    color: var(--dark-color);\n  }\n  \n  .story-description {\n    color: var(--text-color);\n    margin-bottom: 1rem;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n  \n  .story-meta {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    color: #777;\n    font-size: 0.875rem;\n  }\n  \n  .story-detail-button {\n    background-color: var(--secondary-color);\n    color: white;\n    border: none;\n    padding: 0.5rem 1rem;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: var(--transition);\n  }\n  \n  .story-detail-button:hover {\n    background-color: var(--primary-color);\n  }\n  \n  \n  .story-detail-content {\n    width: 80%;\n    max-width: 800px;\n  }\n  \n  .story-detail {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  .story-detail-image {\n    width: 100%;\n    max-height: 400px;\n    object-fit: cover;\n    border-radius: 8px;\n  }\n  \n  .story-detail-info {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n  }\n  \n  .story-map {\n    height: 300px;\n    width: 100%;\n    border-radius: 8px;\n    margin-top: 1rem;\n  }\n  \n  \n  .form-container {\n    background-color: white;\n    padding: 2rem;\n    border-radius: 8px;\n    box-shadow: var(--shadow);\n    max-width: 600px;\n    margin: 0 auto;\n  }\n  \n  .form-title {\n    text-align: center;\n    margin-bottom: 1.5rem;\n    color: var(--dark-color);\n  }\n  \n  .form-group {\n    margin-bottom: 1.5rem;\n  }\n  \n  .form-group label {\n    display: block;\n    margin-bottom: 0.5rem;\n    font-weight: 500;\n  }\n  \n  .form-group input,\n  .form-group textarea {\n    width: 100%;\n    padding: 0.75rem;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    transition: var(--transition);\n  }\n  \n  .form-group input:focus,\n  .form-group textarea:focus {\n    border-color: var(--primary-color);\n    outline: none;\n  }\n  \n  .camera-container {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    margin-bottom: 1.5rem;\n  }\n  \n  .camera-preview {\n    width: 100%;\n    height: 300px;\n    background-color: #f0f0f0;\n    border-radius: 4px;\n    overflow: hidden;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  \n  .camera-preview video,\n  .camera-preview img {\n    max-width: 100%;\n    max-height: 100%;\n  }\n  \n  .camera-buttons {\n    display: flex;\n    gap: 1rem;\n  }\n  \n  .add-map {\n    height: 300px;\n    margin-bottom: 1.5rem;\n    border-radius: 4px;\n    overflow: hidden;\n  }\n  \n  .btn {\n    padding: 0.75rem 1.5rem;\n    border: none;\n    border-radius: 4px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: var(--transition);\n  }\n  \n  .btn-primary {\n    background-color: var(--primary-color);\n    color: white;\n  }\n  \n  .btn-secondary {\n    background-color: var(--secondary-color);\n    color: white;\n  }\n  \n  .btn-danger {\n    background-color: var(--error-color);\n    color: white;\n  }\n  \n  .btn:hover {\n    filter: brightness(90%);\n  }\n  \n  \n  .modal {\n    display: none;\n    position: fixed;\n    z-index: 100;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    overflow: auto;\n  }\n  \n  .modal-content {\n    background-color: white;\n    margin: 10% auto;\n    padding: 2rem;\n    border-radius: 8px;\n    width: 80%;\n    max-width: 500px;\n    box-shadow: var(--shadow);\n    animation: modalIn 0.3s;\n  }\n  \n  @keyframes modalIn {\n    from {\n      opacity: 0;\n      transform: translateY(-50px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  .close {\n    color: #aaa;\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n    cursor: pointer;\n    transition: var(--transition);\n  }\n  \n  .close:hover {\n    color: var(--dark-color);\n  }\n  \n  \n  .notification {\n    position: fixed;\n    bottom: 2rem;\n    right: 2rem;\n    background-color: var(--success-color);\n    color: white;\n    padding: 1rem 2rem;\n    border-radius: 4px;\n    box-shadow: var(--shadow);\n    z-index: 100;\n    animation: fadeIn 0.3s;\n  }\n  \n  .notification.error {\n    background-color: var(--error-color);\n  }\n  \n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  .hidden {\n    display: none;\n  }\n  \n \n  footer {\n    text-align: center;\n    padding: 1.5rem;\n    background-color: white;\n    border-top: 1px solid #eee;\n  }\n  \n  \n  .loader {\n    display: flex;\n    justify-content: center;\n    padding: 2rem;\n  }\n  \n  .spinner {\n    width: 40px;\n    height: 40px;\n    border: 4px solid rgba(0, 0, 0, 0.1);\n    border-radius: 50%;\n    border-left-color: var(--primary-color);\n    animation: spin 1s linear infinite;\n  }\n  \n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n  \n \n  ::view-transition-old(main-content),\n  ::view-transition-new(main-content) {\n    animation: none;\n    mix-blend-mode: normal;\n  }\n  \n  ::view-transition-old(main-content) {\n    opacity: 0;\n  }\n  \n  ::view-transition-new(main-content) {\n    animation: fadeIn 0.5s ease;\n  }\n  \n \n  .profile-container {\n    background-color: white;\n    padding: 2rem;\n    border-radius: 8px;\n    box-shadow: var(--shadow);\n  }\n  \n  .profile-header {\n    text-align: center;\n    margin-bottom: 2rem;\n  }\n  \n  .profile-avatar {\n    width: 100px;\n    height: 100px;\n    border-radius: 50%;\n    object-fit: cover;\n    margin-bottom: 1rem;\n    background-color: var(--secondary-color);\n    color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 2.5rem;\n    margin: 0 auto;\n  }\n  \n  .profile-name {\n    margin-top: 1rem;\n    color: var(--dark-color);\n  }\n  \n  .profile-email {\n    color: #777;\n  }\n  \n  .notifications-section {\n    margin-top: 2rem;\n    border-top: 1px solid #eee;\n    padding-top: 2rem;\n  }\n  \n  .toggle-container {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    margin-top: 1rem;\n  }\n  \n  .toggle-switch {\n    position: relative;\n    display: inline-block;\n    width: 60px;\n    height: 34px;\n  }\n  \n  .toggle-switch input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n  \n  .slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    transition: var(--transition);\n    border-radius: 34px;\n  }\n  \n  .slider:before {\n    position: absolute;\n    content: \"\";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    transition: var(--transition);\n    border-radius: 50%;\n  }\n  \n  input:checked + .slider {\n    background-color: var(--primary-color);\n  }\n  \n  input:checked + .slider:before {\n    transform: translateX(26px);\n  }\n  \n\n  @media (max-width: 768px) {\n    nav {\n      flex-direction: column;\n      padding: 1rem;\n    }\n    \n    .nav-links {\n      margin-top: 1rem;\n      flex-wrap: wrap;\n      justify-content: center;\n    }\n    \n    .stories-container {\n      grid-template-columns: 1fr;\n    }\n    \n    .modal-content {\n      width: 95%;\n      margin: 5% auto;\n    }\n    \n    .story-detail-content {\n      width: 95%;\n    }\n  }",""]);const c=i},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var r=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,exports:{}};return n[r](a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var r=t(72),o=t.n(r),a=t(825),i=t.n(a),c=t(659),s=t.n(c),l=t(56),d=t.n(l),u=t(540),p=t.n(u),m=t(113),f=t.n(m),h=t(365),v={};function g(n){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},g(n)}function y(n,e,t){return(e=function(n){var e=function(n){if("object"!=g(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=g(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==g(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function b(){b=function(){return e};var n,e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(n,e,t){n[e]=t.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{l({},"")}catch(n){l=function(n,e,t){return n[e]=t}}function d(n,e,t,r){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:B(n,t,c)}),i}function u(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}e.wrap=d;var p="suspendedStart",m="suspendedYield",f="executing",h="completed",v={};function y(){}function w(){}function x(){}var k={};l(k,i,(function(){return this}));var E=Object.getPrototypeOf,L=E&&E(E(N([])));L&&L!==t&&r.call(L,i)&&(k=L);var S=x.prototype=y.prototype=Object.create(k);function I(n){["next","throw","return"].forEach((function(e){l(n,e,(function(n){return this._invoke(e,n)}))}))}function T(n,e){function t(o,a,i,c){var s=u(n[o],n,a);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==g(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(n){t("next",n,i,c)}),(function(n){t("throw",n,i,c)})):e.resolve(d).then((function(n){l.value=n,i(l)}),(function(n){return t("throw",n,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(n,r){function o(){return new e((function(e,o){t(n,r,e,o)}))}return a=a?a.then(o,o):o()}})}function B(e,t,r){var o=p;return function(a,i){if(o===f)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:n,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=u(e,t,r);if("normal"===l.type){if(o=r.done?h:m,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=h,r.method="throw",r.arg=l.arg)}}}function j(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=u(o,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,v;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function A(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function P(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function C(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(A,this),this.reset(!0)}function N(e){if(e||""===e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}throw new TypeError(g(e)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=l(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,x):(n.__proto__=x,l(n,s,"GeneratorFunction")),n.prototype=Object.create(S),n},e.awrap=function(n){return{__await:n}},I(T.prototype),l(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(n,t,r,o,a){void 0===a&&(a=Promise);var i=new T(d(n,t,r,o),a);return e.isGeneratorFunction(t)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},I(S),l(S,s,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(n){var e=Object(n),t=[];for(var r in e)t.push(r);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(r,o){return c.type="throw",c.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(n,e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===n||"continue"===n)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=n,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),v},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),P(t),v}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;P(t)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}},e}function w(n,e,t,r,o,a,i){try{var c=n[a](i),s=c.value}catch(n){return void t(n)}c.done?e(s):Promise.resolve(s).then(r,o)}function x(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(n){w(a,r,o,i,c,"next",n)}function c(n){w(a,r,o,i,c,"throw",n)}i(void 0)}))}}v.styleTagTransform=f(),v.setAttributes=d(),v.insert=s().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=p(),o()(h.A,v),h.A&&h.A.locals&&h.A.locals;var k,E,S,I="https://story-api.dicoding.dev/v1",T=[-6.2088,106.8456],B=localStorage.getItem("token"),j=localStorage.getItem("userId"),A=localStorage.getItem("name"),P=null,C=function(n,e){return x(b().mark((function t(){var r,o;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(I,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:e})});case 3:return r=t.sent,t.next=6,r.json();case 6:if(!(o=t.sent).error){t.next=9;break}throw new Error(o.message);case 9:return localStorage.setItem("token",o.loginResult.token),localStorage.setItem("userId",o.loginResult.userId),localStorage.setItem("name",o.loginResult.name),B=o.loginResult.token,j=o.loginResult.userId,A=o.loginResult.name,t.abrupt("return",o);case 18:throw t.prev=18,t.t0=t.catch(0),t.t0;case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))()},N=function(n,e,t){return x(b().mark((function r(){var o,a;return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("".concat(I,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:e,password:t})});case 3:return o=r.sent,r.next=6,o.json();case 6:if(!(a=r.sent).error){r.next=9;break}throw new Error(a.message);case 9:return r.abrupt("return",a);case 12:throw r.prev=12,r.t0=r.catch(0),r.t0;case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},M=function(){var n=arguments;return x(b().mark((function e(){var t,r,o,a,i,c,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,r=n.length>1&&void 0!==n[1]?n[1]:10,o=n.length>2&&void 0!==n[2]?n[2]:0,e.prev=3,a="".concat(I,"/stories?page=").concat(t,"&size=").concat(r,"&location=").concat(o),i={},B&&(i.Authorization="Bearer ".concat(B)),e.next=9,fetch(a,{headers:i});case 9:return c=e.sent,e.next=12,c.json();case 12:if(!(s=e.sent).error){e.next=15;break}throw new Error(s.message);case 15:return e.abrupt("return",s.listStory);case 18:throw e.prev=18,e.t0=e.catch(3),e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,18]])})))()},O=function(n){return x(b().mark((function e(){var t,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(I,"/stories/").concat(n),{headers:{Authorization:"Bearer ".concat(B)}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw new Error(r.message);case 9:return e.abrupt("return",r.story);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},F=function(n,e,t,r){return x(b().mark((function o(){var a,i,c,s,l;return b().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,(a=new FormData).append("description",n),a.append("photo",e),t&&r&&(a.append("lat",t),a.append("lon",r)),i="".concat(I,"/stories"),c={},B?c.Authorization="Bearer ".concat(B):i="".concat(I,"/stories/guest"),o.next=10,fetch(i,{method:"POST",headers:c,body:a});case 10:return s=o.sent,o.next=13,s.json();case 13:if(!(l=o.sent).error){o.next=16;break}throw new Error(l.message);case 16:return o.abrupt("return",l);case 19:throw o.prev=19,o.t0=o.catch(0),o.t0;case 22:case"end":return o.stop()}}),o,null,[[0,19]])})))()},z=function(n){return x(b().mark((function e(){var t,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(I,"/notifications/subscribe"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(B)},body:JSON.stringify({endpoint:n.endpoint,keys:{p256dh:btoa(String.fromCharCode.apply(null,new Uint8Array(n.getKey("p256dh")))),auth:btoa(String.fromCharCode.apply(null,new Uint8Array(n.getKey("auth"))))}})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw new Error(r.message);case 9:return e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},U=function(n){return x(b().mark((function e(){var t,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(I,"/notifications/subscribe"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(B)},body:JSON.stringify({endpoint:n.endpoint})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(r=e.sent).error){e.next=9;break}throw new Error(r.message);case 9:return e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},H=y(y(y(y({init:function(){this.initRouter(),this.initEventListeners(),this.updateAuthUI()},initRouter:function(){window.addEventListener("hashchange",this.handleRouteChange.bind(this)),this.handleRouteChange()},handleRouteChange:function(){var n=window.location.hash||"#/",e={"#/":this.renderHome.bind(this),"#/add-story":this.renderAddStory.bind(this),"#/profile":this.renderProfile.bind(this)};document.startViewTransition?document.startViewTransition((function(){(e[n]||e["#/"])(),document.querySelectorAll(".nav-item").forEach((function(e){e.getAttribute("href")===n?e.classList.add("active"):e.classList.remove("active")}))})):((e[n]||e["#/"])(),document.querySelectorAll(".nav-item").forEach((function(e){e.getAttribute("href")===n?e.classList.add("active"):e.classList.remove("active")})))},initEventListeners:function(){var n=this;document.getElementById("login-button").addEventListener("click",(function(){document.getElementById("login-modal").style.display="block"})),document.getElementById("register-button").addEventListener("click",(function(){document.getElementById("register-modal").style.display="block"})),document.getElementById("logout-button").addEventListener("click",(function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("name"),B=null,j=null,A=null,n.updateAuthUI(),n.showNotification("Logged out successfully"),window.location.hash="#/"})),document.getElementById("login-form").addEventListener("submit",function(){var e=x(b().mark((function e(t){var r,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=document.getElementById("login-email").value,o=document.getElementById("login-password").value,e.prev=3,e.next=6,C(r,o);case 6:document.getElementById("login-modal").style.display="none",n.updateAuthUI(),n.showNotification("Logged in successfully"),window.location.hash="#/",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),n.showNotification(e.t0.message,!0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(n){return e.apply(this,arguments)}}()),document.getElementById("register-form").addEventListener("submit",function(){var e=x(b().mark((function e(t){var r,o,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=document.getElementById("register-name").value,o=document.getElementById("register-email").value,a=document.getElementById("register-password").value,e.prev=4,e.next=7,N(r,o,a);case 7:document.getElementById("register-modal").style.display="none",n.showNotification("Registration successful. Please login."),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),n.showNotification(e.t0.message,!0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(n){return e.apply(this,arguments)}}()),document.querySelectorAll(".close").forEach((function(n){n.addEventListener("click",(function(){document.querySelectorAll(".modal").forEach((function(n){n.style.display="none"})),S&&(S.getTracks().forEach((function(n){return n.stop()})),S=null)}))})),window.addEventListener("click",(function(n){document.querySelectorAll(".modal").forEach((function(e){n.target===e&&(e.style.display="none",S&&(S.getTracks().forEach((function(n){return n.stop()})),S=null))}))}))},updateAuthUI:function(){var n=document.getElementById("login-button"),e=document.getElementById("register-button"),t=document.getElementById("logout-button"),r=document.getElementById("profile-link");B?(n.classList.add("hidden"),e.classList.add("hidden"),t.classList.remove("hidden"),r.classList.remove("hidden")):(n.classList.remove("hidden"),e.classList.remove("hidden"),t.classList.add("hidden"),r.classList.add("hidden"))},renderHome:function(){var n=this;return x(b().mark((function e(){var t,r,o,a,i,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("app")){e.next=4;break}return console.error("Error: #app container not found!"),e.abrupt("return");case 4:return r=document.querySelector(".some-element"),t.innerHTML='\n      <h2>Recent Stories</h2>\n      <div class="loader">\n        <div class="spinner"></div>\n      </div>\n      <div class="stories-container"></div>\n    ',e.prev=6,e.next=9,M(1,20,1);case 9:o=e.sent,a=document.querySelector(".stories-container"),0===o.length?a.innerHTML="<p>No stories found. Be the first to share a story!</p>":(a.innerHTML=o.map((function(n){return'\n              <article class="story-card">\n                <img src="'.concat(n.photoUrl,'" alt="Photo for story by ').concat(n.name,'" class="story-image">\n                <div class="story-content">\n                  <div class="story-author">\n                    <i class="fas fa-user author-icon"></i>\n                    <span>').concat(n.name,'</span>\n                  </div>\n                  <h3 class="story-title">Story by ').concat(n.name,'</h3>\n                  <p class="story-description">').concat(n.description,'</p>\n                  <div class="story-meta">\n                    <span><i class="fas fa-calendar"></i> ').concat(new Date(n.createdAt).toLocaleDateString(),'</span>\n                    <button class="story-detail-button" data-id="').concat(n.id,'">View Details</button>\n                  </div>\n                </div>\n              </article>\n            ')})).join(""),document.querySelectorAll(".story-detail-button").forEach((function(e){e.addEventListener("click",x(b().mark((function t(){var r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getAttribute("data-id"),n.showStoryDetail(r);case 2:case"end":return t.stop()}}),t)}))))}))),(i=document.querySelector(".loader"))?i.remove():console.warn("Loader not found! Skipping remove."),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(6),(c=document.querySelector(".loader"))&&c.remove(),n.showNotification(e.t0.message,!0);case 21:r?r.remove():console.warn("Element '.some-element' not found! Skipping remove.");case 22:case"end":return e.stop()}}),e,null,[[6,16]])})))()},showStoryDetail:function(n){return x(b().mark((function e(){var t,r,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("story-detail-modal"),(r=document.getElementById("story-detail-container")).innerHTML='\n        <div class="loader">\n          <div class="spinner"></div>\n        </div>\n      ',t.style.display="block",e.prev=4,e.next=7,O(n);case 7:o=e.sent,r.innerHTML='\n          <div class="story-detail">\n            <img src="'.concat(o.photoUrl,'" alt="Photo for story by ').concat(o.name,'" class="story-detail-image">\n            <div class="story-detail-info">\n              <div>\n                <h3>').concat(o.name,'\'s Story</h3>\n                <p><i class="fas fa-calendar"></i> ').concat(new Date(o.createdAt).toLocaleDateString(),"</p>\n              </div>\n            </div>\n            <p>").concat(o.description,"</p>\n            ").concat(o.lat&&o.lon?'<div id="detail-map" class="story-map"></div>':"","\n          </div>\n        "),o.lat&&o.lon&&setTimeout((function(){var n=L.map("detail-map").setView([o.lat,o.lon],13),e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t={Street:e,Satellite:L.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google Maps"}),Topographic:L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://opentopomap.org">OpenTopoMap</a> contributors'})};e.addTo(n),L.control.layers(t).addTo(n),L.marker([o.lat,o.lon]).addTo(n).bindPopup("<strong>".concat(o.name,"'s Story</strong><br>").concat(o.description.substring(0,100),"...")).openPopup()}),100),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),r.innerHTML='<p class="error">Error loading story details: '.concat(e.t0.message,"</p>");case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))()},renderAddStory:function(){var n=this;return x(b().mark((function e(){var t,r,o,a,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("app").innerHTML='\n        <div class="form-container">\n          <h2 class="form-title">Share Your Story</h2>\n          <form id="add-story-form">\n            <div class="camera-container">\n              <label>Take a Photo</label>\n              <div class="camera-preview" id="camera-preview">\n                <i class="fas fa-camera fa-3x"></i>\n              </div>\n              <div class="camera-buttons">\n                <button type="button" id="start-camera" class="btn btn-secondary">\n                  <i class="fas fa-camera"></i> Start Camera\n                </button>\n                <button type="button" id="capture-photo" class="btn btn-primary" disabled>\n                  <i class="fas fa-camera-retro"></i> Capture\n                </button>\n                <button type="button" id="retry-photo" class="btn btn-danger" disabled>\n                  <i class="fas fa-redo"></i> Retry\n                </button>\n              </div>\n            </div>\n            \n            <div class="form-group">\n              <label for="story-description">Description</label>\n              <textarea id="story-description" rows="4" required></textarea>\n            </div>\n            \n            <div>\n              <label>Select Location (Click on the map)</label>\n              <div id="add-map" class="add-map"></div>\n              <div class="form-group">\n                <label for="story-location">Selected Location</label>\n                <input type="text" id="story-location" readonly>\n              </div>\n            </div>\n            \n            <button type="submit" class="btn btn-primary">\n              <i class="fas fa-paper-plane"></i> Share Story\n            </button>\n          </form>\n        </div>\n      ',setTimeout((function(){k=L.map("add-map").setView(T,13);var n=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e={Street:n,Satellite:L.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google Maps"}),Topographic:L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://opentopomap.org">OpenTopoMap</a> contributors'})};n.addTo(k),L.control.layers(e).addTo(k),k.on("click",(function(n){E&&k.removeLayer(E),E=L.marker(n.latlng).addTo(k),document.getElementById("story-location").value="Lat: ".concat(n.latlng.lat.toFixed(6),", Lng: ").concat(n.latlng.lng.toFixed(6))}))}),100),t=null,r=document.getElementById("start-camera"),o=document.getElementById("capture-photo"),a=document.getElementById("retry-photo"),i=document.getElementById("camera-preview"),r.addEventListener("click",x(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});case 3:S=e.sent,(t=document.createElement("video")).srcObject=S,t.autoplay=!0,t.id="camera-stream",i.innerHTML="",i.appendChild(t),r.disabled=!0,o.disabled=!1,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n.showNotification("Failed to access camera: "+e.t0.message,!0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))),o.addEventListener("click",(function(){var n=document.getElementById("camera-stream"),e=document.createElement("canvas");e.width=n.videoWidth,e.height=n.videoHeight,e.getContext("2d").drawImage(n,0,0,e.width,e.height);var r=document.createElement("img");r.src=e.toDataURL("image/jpeg"),r.id="captured-image",e.toBlob((function(n){t=n}),"image/jpeg"),i.innerHTML="",i.appendChild(r),o.disabled=!0,a.disabled=!1,S&&S.getTracks().forEach((function(n){return n.stop()}))})),a.addEventListener("click",(function(){t=null,i.innerHTML='<i class="fas fa-camera fa-3x"></i>',r.disabled=!1,o.disabled=!0,a.disabled=!0})),document.getElementById("add-story-form").addEventListener("submit",function(){var e=x(b().mark((function e(c){var s,l,d;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),t){e.next=4;break}return n.showNotification("Please take a photo first",!0),e.abrupt("return");case 4:return s=document.getElementById("story-description").value,l=null,d=null,E&&(l=E.getLatLng().lat,d=E.getLatLng().lng),e.prev=8,e.next=11,F(s,t,l,d);case 11:e.sent,n.showNotification("Story shared successfully!"),document.getElementById("add-story-form").reset(),i.innerHTML='<i class="fas fa-camera fa-3x"></i>',t=null,E&&(k.removeLayer(E),E=null),r.disabled=!1,o.disabled=!0,a.disabled=!0,setTimeout((function(){window.location.hash="#/"}),1500),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),n.showNotification(e.t0.message,!0);case 27:case"end":return e.stop()}}),e,null,[[8,24]])})));return function(n){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)})))()}},"handleRouteChange",(function(){var n=window.location.hash||"#/";({"#/":this.renderHome.bind(this),"#/add-story":this.renderAddStory.bind(this),"#/profile":this.renderProfile.bind(this)}[n]||function(){document.getElementById("app").innerHTML='<h2>Page Not Found</h2><p>Return to <a href="#/">Home</a></p>'})()})),"renderProfile",(function(){var n=this;if(!B)return this.showNotification("Please login to view your profile",!0),void(window.location.hash="#/");var e=document.getElementById("app"),t=A?A.charAt(0).toUpperCase():"U";e.innerHTML='\n        <div class="profile-container">\n          <div class="profile-header">\n            <div class="profile-avatar">'.concat(t,'</div>\n            <h2 class="profile-name">').concat(A||"User",'</h2>\n            <p class="profile-email">User ID: ').concat(j||"Unknown",'</p>\n          </div>\n          \n          <div class="notifications-section">\n            <h3>Push Notifications</h3>\n            <p>Get notified when your stories are published.</p>\n            \n            <div class="toggle-container">\n              <label class="toggle-switch">\n                <input type="checkbox" id="notifications-toggle">\n                <span class="slider"></span>\n              </label>\n              <span>Enable Push Notifications</span>\n            </div>\n          </div>\n        </div>\n      ');var r=document.getElementById("notifications-toggle");"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register("/narsis/service-worker.js").then(function(){var e=x(b().mark((function e(t){var o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:(o=e.sent)&&(P=o,r.checked=!0),r.addEventListener("change",x(b().mark((function e(){var o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.checked){e.next=17;break}return e.prev=1,e.next=4,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n.urlBase64ToUint8Array("BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk")});case 4:return o=e.sent,P=o,e.next=8,z(o);case 8:n.showNotification("Push notifications enabled"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),r.checked=!1,n.showNotification("Failed to enable push notifications: "+e.t0.message,!0);case 15:e.next=30;break;case 17:if(e.prev=17,!P){e.next=25;break}return e.next=21,U(P);case 21:return e.next=23,P.unsubscribe();case 23:P=null,n.showNotification("Push notifications disabled");case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(17),n.showNotification("Failed to disable push notifications: "+e.t1.message,!0);case 30:case"end":return e.stop()}}),e,null,[[1,11],[17,27]])}))));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(n){console.error("Service Worker registration failed:",n),r.disabled=!0,r.parentElement.nextElementSibling.textContent="Push notifications not available"})):(r.disabled=!0,r.parentElement.nextElementSibling.textContent="Push notifications not supported on this browser")})),"showNotification",(function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=document.getElementById("notification"),r=document.getElementById("notification-message");t.classList.remove("hidden","error"),e&&t.classList.add("error"),r.textContent=n,setTimeout((function(){t.classList.add("hidden")}),3e3)})),"urlBase64ToUint8Array",(function(n){for(var e=(n+"=".repeat((4-n.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),t=window.atob(e),r=new Uint8Array(t.length),o=0;o<t.length;++o)r[o]=t.charCodeAt(o);return r}));"serviceWorker"in navigator&&(navigator.serviceWorker.register("/narsis/service-worker.js").then((function(n){console.log("Service Worker registered with scope:",n.scope)})).catch((function(n){console.error("Service Worker registration failed:",n)})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/narsis/service-worker.js").catch((function(n){console.error("Service Worker registration failed:",n)}))}))),document.addEventListener("DOMContentLoaded",(function(){H.init()}))})();